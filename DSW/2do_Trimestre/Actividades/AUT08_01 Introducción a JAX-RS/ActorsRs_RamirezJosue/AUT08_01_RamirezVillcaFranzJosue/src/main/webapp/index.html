<!DOCTYPE html>
<html>
  <head>
    <title>Pagina principal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  </head>
  <body>
    <form>
      <label for="name">Nombre: </label><br><br>
      <input type="text" name="name" id="name"><br><br>
      <label for="last_name">Apellido: </label><br><br>
      <input type="text" name="last_name" id="last_name"><br><br>
      <button>Ajax - Crear</button>
    </form>
    <ul id="actorList" style="float: right"></ul>

    <script type="text/javascript">
      function refreshActorList() {
        var custList = $('#actorList');
        custList.empty();
        $.ajax({
          "url": "webresources/actors/",
          "type": "get",
          "dataType": "json",
          "success": function (actors) {
            console.log(actors);
            $.each(actors, function (i, actor) {
              var li = $('<li/>')
                      .addClass('ui-menu-item')
                      .attr('role', 'menuitem')
                      .appendTo(custList);
              var a = $('<a/>')
                      .addClass('ui-all')
                      .text(actor.firstName + ' ' + actor.lastName)
                      .appendTo(li);
            });
          }
        });
      }
      $(function () {
        refreshActorList();
      });

      $("#cmdSubmit").click(function (event) {
        var actor = {
          firstName: $("#txtNombre").val(),
          lastName: $("#txtApellidos").val()
        };
        var request = $.ajax({
          url: "webresources/actor/",
          type: "POST",
          contentType: 'application/json',
          data: JSON.stringify(actor),
          dataType: "json",
          success: function (data, textStatus, jqXHR) {
            refreshActorList();
          }
        });
      });

    </script>
  </body>
</html>
